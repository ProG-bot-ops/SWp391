<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Date Timezone Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-case { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .problem { background-color: #ffe6e6; }
        .solution { background-color: #e6ffe6; }
        .result { font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>Date Timezone Issue Test</h1>
    
    <div class="test-case problem">
        <h3>❌ Problem: Using toISOString() causes timezone shift</h3>
        <p>When you create a date for 3/8/2025, toISOString() converts it to UTC, which can cause a date shift.</p>
        <div id="problem-result"></div>
    </div>
    
    <div class="test-case solution">
        <h3>✅ Solution: Using local date formatting</h3>
        <p>Using formatDateToYYYYMMDD() preserves the local date without timezone conversion.</p>
        <div id="solution-result"></div>
    </div>

    <script>
        // Helper function to format date as YYYY-MM-DD without timezone conversion
        function formatDateToYYYYMMDD(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        // Test the problem
        function testProblem() {
            const testDate = new Date(2025, 7, 3); // 3/8/2025 (month is 0-indexed)
            const isoString = testDate.toISOString().split('T')[0];
            
            return `
                <div class="result">
                    <p><strong>Input date:</strong> ${testDate.toLocaleDateString('vi-VN')}</p>
                    <p><strong>toISOString().split('T')[0]:</strong> ${isoString}</p>
                    <p><strong>Issue:</strong> Date shifted due to timezone conversion!</p>
                </div>
            `;
        }

        // Test the solution
        function testSolution() {
            const testDate = new Date(2025, 7, 3); // 3/8/2025 (month is 0-indexed)
            const localFormat = formatDateToYYYYMMDD(testDate);
            
            return `
                <div class="result">
                    <p><strong>Input date:</strong> ${testDate.toLocaleDateString('vi-VN')}</p>
                    <p><strong>formatDateToYYYYMMDD():</strong> ${localFormat}</p>
                    <p><strong>Result:</strong> Date preserved correctly!</p>
                </div>
            `;
        }

        // Run tests
        document.getElementById('problem-result').innerHTML = testProblem();
        document.getElementById('solution-result').innerHTML = testSolution();
    </script>
</body>
</html> 